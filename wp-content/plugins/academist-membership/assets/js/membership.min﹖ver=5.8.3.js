var facebookAppId;!function(e,t,a){var o,n=e.getElementsByTagName(t)[0];e.getElementById(a)||((o=e.createElement(t)).id=a,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk"),"undefined"!=typeof eltdfSocialLoginVars&&(facebookAppId=eltdfSocialLoginVars.social.facebookAppId),facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(s){"use strict";var e={};function t(){var e=s(".eltdf-modal-opener"),a=s(".eltdf-modal-holder");e.length&&a.length&&(e.on("click",function(e){e.preventDefault();var t=s(this).data("modal");a.fadeOut(300),a.removeClass("opened"),a.each(function(){var e=s(this);"undefined"!==e.data("modal")&&e.data("modal")===t&&(e.fadeIn(300),e.addClass("opened"))})}),a.each(function(){var t=s(this);t.on("click",function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),s(window).on("keyup",function(e){t.hasClass("opened")&&27===e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),t.find(".eltdf-modal-content").on("click",function(e){e.stopPropagation()})}))}function a(){s(".eltdf-login-form").on("submit",function(e){e.preventDefault();var t={action:"academist_membership_login_user",security:s(this).find("#eltdf-login-security").val(),login_data:s(this).serialize()};return s.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);i(t),"success"===t.status&&(window.location=t.redirect)}}),!1})}function o(){s(".eltdf-register-form").on("submit",function(e){e.preventDefault();var t={action:"academist_membership_register_user",security:s(this).find("#eltdf-register-security").val(),register_data:s(this).serialize()};return s.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);i(t),"success"===t.status&&(window.location=t.redirect)}}),!1})}function n(){var a=s(".eltdf-reset-pass-form");a.on("submit",function(e){e.preventDefault();var t={action:"academist_membership_user_lost_password",user_login:a.find("#user_reset_password_login").val()};s.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);i(t),"success"===t.status&&(window.location=t.redirect)}})})}function i(e){var t=s(".eltdf-membership-response-holder"),a=_.template(s(".eltdf-membership-response-template").html()),o="success"===e.status?"eltdf-membership-message-succes":"eltdf-membership-message-error",n=a({messageClass:o,message:e.message});t.html(n)}function l(){s(".eltdf-facebook-login-holder").on("submit",function(e){e.preventDefault(),window.FB.login(function(e){var t;"connected"===(t=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var t=s(".eltdf-facebook-login-holder [name^=eltdf_nonce_facebook_login]").val();e.nonce=t,e.image=e.picture.data.url;var a={action:"academist_membership_check_facebook_user",response:e};s.ajax({type:"POST",data:a,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);i(t),"success"===t.status&&(window.location=t.redirect)}})})):"not_authorized"===t.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function d(){var e;"undefined"!=typeof eltdfSocialLoginVars&&(e=eltdfSocialLoginVars.social.googleClientId),e?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),s(".eltdf-google-login-holder").on("submit",function(e){e.preventDefault(),window.auth2.signIn(),function(){{var e,t,a;window.auth2.isSignedIn.get()&&(e=window.auth2.currentUser.get().getBasicProfile(),t=s(".eltdf-google-login-holder [name^=eltdf_nonce_google_login]").val(),a={action:"academist_membership_check_google_user",response:{id:e.getId(),name:e.getName(),email:e.getEmail(),image:e.getImageUrl(),link:"https://plus.google.com/"+e.getId(),nonce:t}},s.ajax({type:"POST",data:a,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);i(t),"success"===t.status&&(window.location=t.redirect)}}))}}()})}):s(".eltdf-google-login-holder").on("submit",function(e){e.preventDefault()})}"undefined"!=typeof eltdf&&(eltdf.modules.socialLogin=e),e.eltdfUserLogin=a,e.eltdfUserRegister=o,e.eltdfUserLostPassword=n,e.eltdfInitWidgetModal=t,e.eltdfInitFacebookLogin=l,e.eltdfInitGooglePlusLogin=d,e.eltdfRenderAjaxResponseMessage=i,s(document).ready(function(){t(),a(),o(),n()}),s(window).on("load",function(){l(),d(),function(){s(".eltdf-membership-main-wrapper");var e=s(".page-template-user-dashboard .eltdf-content"),t=s(".eltdf-page-footer"),a=0;!eltdf.body.hasClass("eltdf-header-transparent")&&1024<eltdf.windowWidth&&(a=a+eltdfGlobalVars.vars.eltdfMenuAreaHeight+eltdfGlobalVars.vars.eltdfLogoAreaHeight);0<t.length&&(a+=t.outerHeight());{var o;1024<eltdf.windowWidth&&(o=eltdf.windowHeight-a,e.css({"min-height":o+"px"}))}}()})}(jQuery),function(s){"use strict";var e={};function t(){a(),s(document.body).on("academist_membership_favorites_trigger",function(){a()})}function a(){s(".eltdf-membership-item-favorites").on("click",function(e){e.preventDefault();var t,a,o,n=s(this);void 0!==n.data("item-id")&&(t=n.data("item-id")),a=n,o={action:"academist_membership_add_item_to_favorites",item_id:t},s.ajax({type:"POST",data:o,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);"success"===t.status&&(a.hasClass("eltdf-icon-only")||a.find("span").text(t.data.message),a.find(".eltdf-favorites-icon").removeClass("eltdf-favorite-inactive eltdf-favorite-active").addClass(t.data.icon))}})})}(eltdf.modules.membershipFavorites=e).eltdfOnDocumentReady=t,s(document).ready(t)}(jQuery);